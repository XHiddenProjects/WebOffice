$(document).ready(function(){
    $('[wo-clock]').each(function() {
        const $clock = $(this);
        const format = $clock.attr('wo-clock-format') || 'Y-m-d H:i:s';
        function updateClock() {
            const now = new Date(),
            tf = new TimeFormat(now.toISOString().replace(/T/,' ').replace(/Z/,''));
            $clock.html(tf.format(format));
            const hrs = parseInt(tf.format('H'));
            if(hrs>=0&&hrs<12) $clock.attr('wo-clock-style','morning');
            else if(hrs>=12&&hrs<18) $clock.attr('wo-clock-style','afternoon');
            else if(hrs>=18&&hrs<21) $clock.attr('wo-clock-style','evening');
            else $clock.attr('wo-clock-style','night');
        }

        // Initial call
        updateClock();

        // Update every second
        setInterval(updateClock, 1000);
    });
});